# Курс по Java. Part 2 #
## ООП ##

В Java никакой класс не должен лежать в root-директории src. Нужно создавать пакеты.

Live-template - пишем ключевое слово и нажимаем Tab (или Enter). Idea сама генерирует нужный код.
Ex. iter - цикл for-each. main, sout e.t.c

Структурное программирование - последовательное выполнение кода, строчка за строчкой.

ООП - стиль программирования, в котором операции производятся над объектами, используется их функционал и изменяется их состояние.

Объект - конкретный экземпляр кого-либо класса.

Классы согласно конвенции именуются с большой буквы в camel-case, методы с маленькой буквы. Исключение - конструктор, его имя должно совпадать с именем класса и начинаться с большой буквы.

Ctrl + D - продублировать выделенный код.

В сигнатуру метода входит название функции и аргументы. Возвращаемый тип не входит в сигнатуру метода, он не учитывается при перегрузке.

Ctrl + P - показывает все возможные перегрузки метода.

Модификаторы доступа ставятся над классами, полями, методами.

package private (нет модификатора) - доступ только внутри пакета.

protected - похож на package-private, только ещё доступ предоставляется в классах-наследниках.

Для классов, кроме внутренних вложенных можно указывать либо public, либо ничего.

Пакет - неотъемлимая часть имени класса.

Пакет java.lang импортится автоматически.

## Heap and Stack

При начале работы Java-приложения ему выделяется некоторое колличество оперативной памяти, необходимой для работы. Размер памяти определяется через параметры командной строки или дефолтным значением.

Память, которая выделяется под Java-процесс разбивается на два блока: самый большой - Heap и Stack.

Heap - общий для всех потоков, а Stack создаётся для каждого потока свой.

В многопоточности возникают коллизии, когда из разных Stackов происходит доступ к одному и тому же объекту в Heap.

Правила:
1. Во время выполнение программ все локальные переменные примитивного типа (и их значения) полностью находятся в стековой области памяти. 
2. Ключевое слово new означает выделение памяти под объект в Heap. В Stack хранится ссылка на эту область памяти.

В Java по умолчанию под ссылки выделяется 4 байта. Размер зависит от размера Heap, если он больше 32 ГБ, то на ссылку выделяется 8 байт, чтобы покрыть адресное пространство.

У каждого объекта есть ссылка this, которая указывает на этот объект, для удобства.

После выполнения потока все ссылки на объекты в Heap удаляются. И необходимо собрать мусор с помощью Garbage Collector. В Heap есть разные области памяти, чтобы разделять новые и старые объекты и запускать разные механизмы для очистки Heap.

Ctrl + Alt + M - участок кода переносится в отдельный метод.

По статистике строки занимают до 70% объема Heap, поэтому придуманы различные методы обратки строк. 
Например, кэширование, то есть, если строка есть в Heap, её переиспользуют, а не создают объект заново.

Модификатор static указывает, что поле или метод относится ко всему классу, а не к конкретному экземпляру и может быть вызван по имени класса.
Вызвать через ключевое слово this значение этого поля нельзя.

Метод getClass возвращает класс, к которому принадлежит объект.
Class<? extends Computer> clazz = computer.getClass();

класс Class необходим, чтобы инициализировать классы, которые мы создаём. На каждый класс, который мы создали создаётся объект, который сохраняется в MetaSpace - область памяти в Heap для хранения классов.

Static используется для утилитных классов, для которых не нужен конретный экземпляр.

Константы в классах принято создавать статическими.

prsf - создание private static final.

Согласно конвенции все константы должны именоваться в upper-case и snake-case.

## Класс String

В классе String главное поле - byte[] value. В более ранних версиях было char[]. Замена связана с более оптимальным использованием памяти, большинство строк представляют собой массивы латинских символов, один символ занимает 1 байт, а char занимает 2 байта.

По умолчанию Charset - utf-8. Можно передавать Charset в конструктор String.

Строки сравниваются методом compareTo.

lines() - возвращает стрим из строки.

Из static функции мы можем вызывать только static функции, либо статеческие методы у классов.

Ctrl + Alt + V - создание переменной.

Ctrl + Alt + N - убрать локальную переменную (inline).

Все методы класса String создают новую строку, так как объекты класса String immutable.

System - утилитный метод. Содержит только private конструктор, т.е. экземпляр этого класса можно создать только из него самого.

Для конкатенации строк в цикле необходимо использовать StringBuilder. При обычной конкатенации строк каждый раз создаётся новый объект.
В классе StringBuilder так же есть массив char[] value, но ещё и счётчик count, который показывает на сколько заполнен массив.
StringBuilder работает похожим образом на ArrayList. Таким образом новый объект создаётся тольк тогда когда заканчивается capacity массива value.

StringBuffer - потокобезопасный класс, то есть все его методы синхронизированы (помечены ключевым словом synchronized - то есть эту функцию у одного и того же объекта может вызвать только один поток одновременно)

Однако часто используется и StringBuilder т.к. мы создаём локальную переменную этого типа, которая потокобезопасна. Потому что каждый поток создаёт свою локальную переменную и только у него есть доступ к ссылке на эту переменную.

## Принципы ООП

Инкупсуляция - скрытие сложности(поля) от пользователя.
public-методы называют интерфейсами.

extends - ключевое слово наследования. При наследовании мы обязаны вызвать в конструкторе, один из конструкторов родителя (super()).
super() вызывается в первой строчке.
Если в классе есть конструктор без параметров, то super() можно опустить.

В Java нет множественного наследования.

В Java все классы наследуются от класса Object.

Ctrl + F12 - отображение всех методов класса.

Через ключевое слово this() можно вызвать конструктор данного класса.

native - ключевое слово, означающее, что данный метод использует нативные библиотеки (напианные на С, С++) для улучшения производительности.

В каждом классе можно указать блок инициализации (используется редко), он выполняется перед конструктором:
 {
    System.out.println("init")
 }

Статический блок инициализации вызывется один раз при создании первого объекта класса, т.е. когда создаётся объект класса Class
 static {
    System.out.println("init")
 }


## Абстрактные классы

+ Запрещается создавать экземпляры класса.
+ Класс создан только для его наследования.

Чтобы сделать класс абстрактным его нужно пометить ключевым словом abstract.

Абстрактный метод - метод, который должен быть переопределен во всех классах наследниках.

Ex. public abstract void load();

Если другой абстрактный класс наследует абстрактный, то нет обязательства реализовывать абстрактный метод.

Мы не можем создать абстрактный метод у неабстрактного класса.

Чтобы запретить наследование от данного класса нужно использовать ключевое слово final. Нельзя одновременно ипользовать ключевые слова final и abstract.

Полиморфизм - один интерфейс и множество реализаций.
Под интерфейсом понимается открытый функционал класса.

Переопределить можно не только абстрактные методы, главное, чтобы они не были private.

Мы не можем сужать область видимости базового функционала.




































